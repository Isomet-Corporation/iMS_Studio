<UserControl x:Class="iMS_Studio.View.CompensationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:iMS_Studio.ViewModel"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:d3="clr-namespace:Microsoft.Research.DynamicDataDisplay;assembly=DynamicDataDisplay"
             xmlns:d3c="clr-namespace:Microsoft.Research.DynamicDataDisplay.Charts;assembly=DynamicDataDisplay"
             xmlns:xctk="clr-namespace:Xceed.Wpf.Toolkit;assembly=DotNetProjects.Wpf.Extended.Toolkit"
             xmlns:local="clr-namespace:iMS_Studio.View"
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="200">
    <Grid>
        <Grid.RowDefinitions>
 <!--           <RowDefinition Height="Auto"/>-->
            <RowDefinition Height="*"/>
            <RowDefinition Height="5" />
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
 <!--       <GroupBox Header="Update Table From Compensation Function:" Margin="3">
            <Grid Margin="3" >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="100"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal">
                    <Label>Select Channel: </Label>
                    <xctk:IntegerUpDown Name="Ch" Minimum="1" Maximum="{Binding RFChannels}" Value="1" 
                                        IsEnabled="{Binding GlobalScope, Converter={StaticResource BooleanInvertValueConverter}}" Margin="3"></xctk:IntegerUpDown>
                </StackPanel>
                <Button Grid.Row="0" Grid.Column="1" Margin="3">Generate</Button>
            </Grid>
        </GroupBox>-->
        <!-- D3 markup starts here-->
        <d3:ChartPlotter Grid.Row="0" x:Name="compPlotter" Margin="0,-2,0,2" LegendVisible="True" Loaded="CompPlotter_Loaded" >
            <d3:Header>
                <TextBlock HorizontalAlignment="Center" FontSize="13" Margin="45,5,0,5" Text="{Binding PlotTitle}"/>
            </d3:Header>
            <d3:VerticalAxisTitle>
                <TextBlock HorizontalAlignment="Center" FontSize="12" Margin="0,5,0,0" Text="{Binding YAxisTitle}" />
            </d3:VerticalAxisTitle>
            <d3:HorizontalAxisTitle FontSize="12" >Frequency (MHz)</d3:HorizontalAxisTitle>
            <d3:LineGraph x:Name="linegraph" DataSource="{Binding PlotData}" Stroke="Blue" StrokeThickness="2"
                          d3c:Legend.Description="Ch1" />
            <d3:LineGraph x:Name="linegraph_ch2" DataSource="{Binding PlotDataCh2}" Stroke="Red" StrokeThickness="2" 
                          d3c:Legend.Description="Ch2" 
                          Visibility="{Binding GlobalScope, Converter={StaticResource BooleanToInvisibilityConverter}}"/>
            <d3:LineGraph x:Name="linegraph_ch3" DataSource="{Binding PlotDataCh3}" Stroke="Green" StrokeThickness="2"
                          d3c:Legend.Description="Ch3"
                          Visibility="{Binding GlobalScope, Converter={StaticResource BooleanToInvisibilityConverter}}"/>
            <d3:LineGraph x:Name="linegraph_ch4" DataSource="{Binding PlotDataCh4}" Stroke="Purple" StrokeThickness="2"
                          d3c:Legend.Description="Ch4"
                          Visibility="{Binding GlobalScope, Converter={StaticResource BooleanToInvisibilityConverter}}"/>
        </d3:ChartPlotter>
        <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" Height="5"/>
        <StackPanel Grid.Row="2">
            <GroupBox Header="Plot:" Margin="3">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <RadioButton GroupName="PlotGroup" Grid.Row="0" Grid.Column="0"
                    IsChecked="{Binding PlotType, Converter={StaticResource RadioButtonCheckedConverter}, 
                    ConverterParameter={x:Static vm:CompensationPlotType.Amplitude}}" Margin="10,8,0,0" Checked="RadioButton_Checked">
                        Amplitude
                    </RadioButton>
                    <RadioButton GroupName="PlotGroup" Grid.Row="0" Grid.Column="1"
                    IsChecked="{Binding PlotType, Converter={StaticResource RadioButtonCheckedConverter}, 
                    ConverterParameter={x:Static vm:CompensationPlotType.Phase}}" Margin="10,8,0,0" Checked="RadioButton_Checked">
                        Phase
                    </RadioButton>
                    <RadioButton GroupName="PlotGroup" Grid.Row="1" Grid.Column="0"
                    IsChecked="{Binding PlotType, Converter={StaticResource RadioButtonCheckedConverter}, 
                    ConverterParameter={x:Static vm:CompensationPlotType.SyncAnlg}}" Margin="10,8,0,0" Checked="RadioButton_Checked" >
                        Analog LUT
                    </RadioButton>
                    <RadioButton GroupName="PlotGroup" Grid.Row="1" Grid.Column="1"
                    IsChecked="{Binding PlotType, Converter={StaticResource RadioButtonCheckedConverter}, 
                    ConverterParameter={x:Static vm:CompensationPlotType.SyncDig}}" Margin="10,8,0,0">
                        Digital LUT
                    </RadioButton>
                </Grid>
            </GroupBox>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <GroupBox Grid.Column="0" Header="Channel Scope" Margin="3" Name="GlobalScope">
                    <CheckBox Margin="5,8,0,5" Name="GlobalScopeCheckBox" IsChecked="{Binding GlobalScope, Mode=TwoWay}" Click="CheckBox_Checked" IsEnabled="{Binding ChannelComp}">
                        Global
                    </CheckBox>
                </GroupBox>
                <GroupBox Grid.Column="1" Header="X/Y AOD" Margin="3">
                    <CheckBox IsChecked="{Binding XYPairing}" Margin="5,8,0,5">
                        Synch Phase Pairs
                    </CheckBox>
                </GroupBox>
            </Grid>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*" />
                    <ColumnDefinition Width="2*" />
                </Grid.ColumnDefinitions>
                <GroupBox Header="Import / Export" Margin="3" Grid.Column="0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Button Content="Import" Height="25" Grid.Column="0" Margin="3" Command="{Binding Path=ImportComp}"/>
                        <Button Content="Export" Height="25" Grid.Column="1" Margin="3" Command="{Binding Path=ExportComp}"/>
                    </Grid>
                </GroupBox>
                <Button Content="DOWNLOAD" Height="45" Grid.Column="1" Margin="12,10,12,10" Command="{Binding Path=DownloadComp}"/>
            </Grid>
        </StackPanel>
    </Grid>
</UserControl>
